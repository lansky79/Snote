<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>系统设置 - 源踔科技集成产品开发管理系统</title>
    <link rel="stylesheet" href="css/common.css" />
  </head>
  <body>
    <!-- 左侧导航栏 -->
    <nav class="sidebar">
      <div class="sidebar-header">
        <div class="system-title">
          <div class="company-name">源踔科技</div>
          <div class="system-name">集成产品开发管理系统</div>
        </div>
      </div>
      <div class="nav-menu">
        <a href="index.html">项目概览</a>
        <a href="dashboard.html">数据分析</a>
        <a href="team.html">团队协作</a>
        <a href="stages.html">阶段管理</a>
        <a href="dcp.html">DCP评审</a>
        <a href="deliverables.html">交付物管理</a>
        <a href="reports.html">报表中心</a>
        <a href="users.html">用户管理</a>
        <a href="help.html">帮助</a>
        <a href="settings.html">系统设置</a>
        <a href="#" onclick="logout()" class="logout">退出</a>
      </div>
    </nav>

    <!-- 主要内容区域 -->
    <main class="main-content">
      <!-- 设置内容 -->
      <div class="card">
        <div class="card-content" style="padding: 0">
          <div
            style="
              display: grid;
              grid-template-columns: 200px 1fr;
              min-height: 500px;
            "
          >
            <!-- 设置菜单 -->
            <div
              style="
                background: #f8f9fa;
                padding: 20px;
                border-right: 1px solid #e9ecef;
              "
            >
              <div style="display: flex; flex-direction: column; gap: 5px">
                <button
                  id="tab-project"
                  class="settings-tab active"
                  onclick="showSettingsTab('project')"
                >
                  项目设置
                </button>
                <button
                  id="tab-notification"
                  class="settings-tab"
                  onclick="showSettingsTab('notification')"
                >
                  通知设置
                </button>
                <button
                  id="tab-security"
                  class="settings-tab"
                  onclick="showSettingsTab('security')"
                >
                  安全设置
                </button>
                <button
                  id="tab-backup"
                  class="settings-tab"
                  onclick="showSettingsTab('backup')"
                >
                  备份设置
                </button>
              </div>
            </div>

            <!-- 设置内容 -->
            <div style="padding: 30px">
              <!-- 项目设置 -->
              <div id="settings-project" class="settings-content">
                <h3 style="color: #2c3e50; margin-bottom: 25px">项目设置</h3>

                <div style="display: flex; flex-direction: column; gap: 25px">
                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >默认项目状态</label
                    >
                    <select
                      style="
                        width: 100%;
                        padding: 12px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        font-size: 1em;
                      "
                    >
                      <option value="planning" selected>规划中</option>
                      <option value="in_progress">进行中</option>
                      <option value="not_started">未开始</option>
                    </select>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      新建项目的默认状态
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >项目编号前缀</label
                    >
                    <input
                      type="text"
                      value="PROJ"
                      style="
                        width: 100%;
                        padding: 12px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        font-size: 1em;
                      "
                    />
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      自动生成项目编号的前缀
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >阶段自动推进</label
                    >
                    <div style="display: flex; align-items: center; gap: 10px">
                      <input type="checkbox" id="auto-stage" checked />
                      <label
                        for="auto-stage"
                        style="margin: 0; font-weight: normal"
                        >启用阶段自动推进</label
                      >
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      当前阶段完成时自动推进到下一阶段
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >DCP评审设置</label
                    >
                    <div
                      style="display: flex; flex-direction: column; gap: 10px"
                    >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="dcp-required" checked />
                        <label
                          for="dcp-required"
                          style="margin: 0; font-weight: normal"
                          >阶段推进需要DCP评审通过</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="dcp-auto-create" />
                        <label
                          for="dcp-auto-create"
                          style="margin: 0; font-weight: normal"
                          >自动创建DCP评审任务</label
                        >
                      </div>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      决策检查点评审相关设置
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >项目模板</label
                    >
                    <select
                      style="
                        width: 100%;
                        padding: 12px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        font-size: 1em;
                      "
                    >
                      <option value="standard" selected>标准IPD项目</option>
                      <option value="agile">敏捷开发项目</option>
                      <option value="research">研发项目</option>
                      <option value="maintenance">维护项目</option>
                    </select>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      新建项目的默认模板
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >预算管理</label
                    >
                    <div
                      style="display: flex; flex-direction: column; gap: 10px"
                    >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="budget-required" checked />
                        <label
                          for="budget-required"
                          style="margin: 0; font-weight: normal"
                          >项目必须设置预算</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="budget-alert" checked />
                        <label
                          for="budget-alert"
                          style="margin: 0; font-weight: normal"
                          >预算超支预警（80%）</label
                        >
                      </div>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      项目预算控制设置
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >交付物管理</label
                    >
                    <div
                      style="display: flex; flex-direction: column; gap: 10px"
                    >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input
                          type="checkbox"
                          id="deliverable-version"
                          checked
                        />
                        <label
                          for="deliverable-version"
                          style="margin: 0; font-weight: normal"
                          >启用交付物版本控制</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input
                          type="checkbox"
                          id="deliverable-approval"
                          checked
                        />
                        <label
                          for="deliverable-approval"
                          style="margin: 0; font-weight: normal"
                          >交付物需要审批</label
                        >
                      </div>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      项目交付物相关设置
                    </div>
                  </div>

                  <div>
                    <button
                      class="btn btn-primary"
                      onclick="saveSettings()"
                      style="width: fit-content"
                    >
                      保存设置
                    </button>
                  </div>
                </div>
              </div>

              <!-- 通知设置 -->
              <div
                id="settings-notification"
                class="settings-content"
                style="display: none"
              >
                <h3 style="color: #2c3e50; margin-bottom: 25px">通知设置</h3>

                <div style="display: flex; flex-direction: column; gap: 25px">
                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >邮件通知</label
                    >
                    <div
                      style="display: flex; flex-direction: column; gap: 10px"
                    >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="email-notify" checked />
                        <label
                          for="email-notify"
                          style="margin: 0; font-weight: normal"
                          >启用邮件通知</label
                        >
                      </div>
                      <div
                        style="
                          display: flex;
                          align-items: center;
                          gap: 10px;
                          margin-left: 20px;
                        "
                      >
                        <input
                          type="checkbox"
                          id="email-project-status"
                          checked
                        />
                        <label
                          for="email-project-status"
                          style="
                            margin: 0;
                            font-weight: normal;
                            font-size: 0.9em;
                          "
                          >项目状态变更通知</label
                        >
                      </div>
                      <div
                        style="
                          display: flex;
                          align-items: center;
                          gap: 10px;
                          margin-left: 20px;
                        "
                      >
                        <input type="checkbox" id="email-dcp-review" checked />
                        <label
                          for="email-dcp-review"
                          style="
                            margin: 0;
                            font-weight: normal;
                            font-size: 0.9em;
                          "
                          >DCP评审通知</label
                        >
                      </div>
                      <div
                        style="
                          display: flex;
                          align-items: center;
                          gap: 10px;
                          margin-left: 20px;
                        "
                      >
                        <input type="checkbox" id="email-deliverable" />
                        <label
                          for="email-deliverable"
                          style="
                            margin: 0;
                            font-weight: normal;
                            font-size: 0.9em;
                          "
                          >交付物提交通知</label
                        >
                      </div>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      选择需要邮件通知的事件类型
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >系统通知</label
                    >
                    <div
                      style="display: flex; flex-direction: column; gap: 10px"
                    >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="system-notify" checked />
                        <label
                          for="system-notify"
                          style="margin: 0; font-weight: normal"
                          >启用系统内通知</label
                        >
                      </div>
                      <div
                        style="
                          display: flex;
                          align-items: center;
                          gap: 10px;
                          margin-left: 20px;
                        "
                      >
                        <input type="checkbox" id="system-sound" />
                        <label
                          for="system-sound"
                          style="
                            margin: 0;
                            font-weight: normal;
                            font-size: 0.9em;
                          "
                          >通知声音提醒</label
                        >
                      </div>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      系统内消息通知设置
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >通知频率</label
                    >
                    <select
                      style="
                        width: 100%;
                        padding: 12px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        font-size: 1em;
                      "
                    >
                      <option value="immediate" selected>立即通知</option>
                      <option value="hourly">每小时汇总</option>
                      <option value="daily">每日汇总</option>
                      <option value="weekly">每周汇总</option>
                    </select>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      邮件通知的发送频率
                    </div>
                  </div>

                  <div>
                    <button
                      class="btn btn-primary"
                      onclick="saveSettings()"
                      style="width: fit-content"
                    >
                      保存设置
                    </button>
                  </div>
                </div>
              </div>

              <!-- 安全设置 -->
              <div
                id="settings-security"
                class="settings-content"
                style="display: none"
              >
                <h3 style="color: #2c3e50; margin-bottom: 25px">安全设置</h3>

                <div style="display: flex; flex-direction: column; gap: 25px">
                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >会话超时时间</label
                    >
                    <select
                      style="
                        width: 100%;
                        padding: 12px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        font-size: 1em;
                      "
                    >
                      <option value="30">30分钟</option>
                      <option value="60" selected>1小时</option>
                      <option value="120">2小时</option>
                      <option value="480">8小时</option>
                    </select>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      用户无操作后自动退出的时间
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >密码策略</label
                    >
                    <div
                      style="display: flex; flex-direction: column; gap: 10px"
                    >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input
                          type="checkbox"
                          id="password-complexity"
                          checked
                        />
                        <label
                          for="password-complexity"
                          style="margin: 0; font-weight: normal"
                          >启用密码复杂度要求</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="password-expiry" />
                        <label
                          for="password-expiry"
                          style="margin: 0; font-weight: normal"
                          >密码定期过期（90天）</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="password-history" checked />
                        <label
                          for="password-history"
                          style="margin: 0; font-weight: normal"
                          >禁止重复使用最近5个密码</label
                        >
                      </div>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      系统密码安全策略设置
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >登录安全</label
                    >
                    <div
                      style="display: flex; flex-direction: column; gap: 10px"
                    >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="login-attempts" checked />
                        <label
                          for="login-attempts"
                          style="margin: 0; font-weight: normal"
                          >限制登录尝试次数（5次）</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="ip-whitelist" />
                        <label
                          for="ip-whitelist"
                          style="margin: 0; font-weight: normal"
                          >启用IP白名单</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="login-log" checked />
                        <label
                          for="login-log"
                          style="margin: 0; font-weight: normal"
                          >记录登录日志</label
                        >
                      </div>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      用户登录安全控制
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >数据加密</label
                    >
                    <div
                      style="display: flex; flex-direction: column; gap: 10px"
                    >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="data-encryption" checked />
                        <label
                          for="data-encryption"
                          style="margin: 0; font-weight: normal"
                          >启用数据库加密</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="file-encryption" checked />
                        <label
                          for="file-encryption"
                          style="margin: 0; font-weight: normal"
                          >启用文件传输加密</label
                        >
                      </div>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      系统数据安全加密设置
                    </div>
                  </div>

                  <div>
                    <button
                      class="btn btn-primary"
                      onclick="saveSettings()"
                      style="width: fit-content"
                    >
                      保存设置
                    </button>
                  </div>
                </div>
              </div>

              <!-- 备份设置 -->
              <div
                id="settings-backup"
                class="settings-content"
                style="display: none"
              >
                <h3 style="color: #2c3e50; margin-bottom: 25px">备份设置</h3>

                <div style="display: flex; flex-direction: column; gap: 25px">
                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >自动备份</label
                    >
                    <div
                      style="
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        margin-bottom: 10px;
                      "
                    >
                      <input type="checkbox" id="auto-backup" checked />
                      <label
                        for="auto-backup"
                        style="margin: 0; font-weight: normal"
                        >启用自动备份</label
                      >
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      系统将自动备份重要数据
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >备份频率</label
                    >
                    <select
                      style="
                        width: 100%;
                        padding: 12px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        font-size: 1em;
                      "
                    >
                      <option value="daily" selected>每日备份</option>
                      <option value="weekly">每周备份</option>
                      <option value="monthly">每月备份</option>
                    </select>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      自动备份的执行频率
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >备份时间</label
                    >
                    <input
                      type="time"
                      value="02:00"
                      style="
                        width: 100%;
                        padding: 12px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        font-size: 1em;
                      "
                    />
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      每日自动备份的执行时间
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >备份保留</label
                    >
                    <select
                      style="
                        width: 100%;
                        padding: 12px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        font-size: 1em;
                      "
                    >
                      <option value="7">保留7天</option>
                      <option value="30" selected>保留30天</option>
                      <option value="90">保留90天</option>
                      <option value="365">保留1年</option>
                    </select>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      备份文件的保留时间
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >备份内容</label
                    >
                    <div
                      style="display: flex; flex-direction: column; gap: 10px"
                    >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="backup-database" checked />
                        <label
                          for="backup-database"
                          style="margin: 0; font-weight: normal"
                          >数据库备份</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="backup-files" checked />
                        <label
                          for="backup-files"
                          style="margin: 0; font-weight: normal"
                          >文件备份</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="backup-config" checked />
                        <label
                          for="backup-config"
                          style="margin: 0; font-weight: normal"
                          >配置备份</label
                        >
                      </div>
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="backup-logs" />
                        <label
                          for="backup-logs"
                          style="margin: 0; font-weight: normal"
                          >日志备份</label
                        >
                      </div>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      选择需要备份的内容类型
                    </div>
                  </div>

                  <div>
                    <label
                      style="
                        display: block;
                        margin-bottom: 8px;
                        color: #666;
                        font-weight: bold;
                      "
                      >备份操作</label
                    >
                    <div style="display: flex; gap: 10px">
                      <button
                        class="btn btn-secondary"
                        onclick="showAlert('立即备份功能开发中')"
                        style="width: fit-content"
                      >
                        立即备份
                      </button>
                      <button
                        class="btn btn-secondary"
                        onclick="showAlert('恢复备份功能开发中')"
                        style="width: fit-content"
                      >
                        恢复备份
                      </button>
                      <button
                        class="btn btn-secondary"
                        onclick="showAlert('下载备份功能开发中')"
                        style="width: fit-content"
                      >
                        下载备份
                      </button>
                    </div>
                    <div style="color: #999; font-size: 0.8em; margin-top: 5px">
                      手动执行备份相关操作
                    </div>
                  </div>

                  <div>
                    <button
                      class="btn btn-primary"
                      onclick="saveSettings()"
                      style="width: fit-content"
                    >
                      保存设置
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- 引入脚本 -->
    <script src="js/data.js"></script>
    <script src="js/common.js"></script>
    <script>
      // 设置标签切换
      function showSettingsTab(tabName) {
        // 隐藏所有内容
        var contents = document.querySelectorAll(".settings-content");
        contents.forEach(function (content) {
          content.style.display = "none";
        });

        // 重置所有按钮样式
        var buttons = document.querySelectorAll(".settings-tab");
        buttons.forEach(function (btn) {
          btn.classList.remove("active");
        });

        // 显示目标内容
        var targetContent = document.getElementById("settings-" + tabName);
        if (targetContent) {
          targetContent.style.display = "block";
        }

        // 激活对应按钮
        var activeButton = document.getElementById("tab-" + tabName);
        if (activeButton) {
          activeButton.classList.add("active");
        }
      }

      // 保存设置
      function saveSettings() {
        showSuccessMessage("设置已保存成功！");
      }

      // 页面初始化
      document.addEventListener("DOMContentLoaded", function () {
        // 检查登录状态
        if (sessionStorage.getItem("isLoggedIn") !== "true") {
          window.location.href = "login.html";
          return;
        }

        // 添加设置标签样式
        var style = document.createElement("style");
        style.textContent = `
                .settings-tab {
                    width: 100%;
                    padding: 12px 15px;
                    text-align: left;
                    border: none;
                    background: transparent;
                    color: #666;
                    border-radius: 4px;
                    cursor: pointer;
                    transition: all 0.3s;
                    font-size: 0.9em;
                }
                .settings-tab:hover {
                    background: #e9ecef;
                    color: #2c3e50;
                }
                .settings-tab.active {
                    background: #3498db;
                    color: white;
                }
                .settings-content {
                    animation: fadeIn 0.3s ease-in-out;
                }
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
            `;
        document.head.appendChild(style);
      });
    </script>
  </body>
</html>
