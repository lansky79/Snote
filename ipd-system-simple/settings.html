<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>系统设置 - IPD项目协作系统</title>
    <link rel="stylesheet" href="css/common.css" />
  </head>
  <body>
    <!-- 顶部导航栏 -->
    <nav class="top-nav">
      <div class="nav-container">
        <div class="nav-brand">IPD项目协作系统</div>
        <div class="nav-menu">
          <a href="index.html">项目概览</a>
          <a href="dashboard.html">仪表板</a>
          <a href="team.html">团队协作</a>
          <a href="stages.html">阶段管理</a>
          <a href="dcp.html">DCP评审</a>
          <a href="deliverables.html">交付物管理</a>
          <a href="users.html">用户管理</a>
          <a href="settings.html">系统设置</a>
        </div>
      </div>
    </nav>

    <!-- 主要内容区域 -->
    <main class="main-content">
      <div class="container">
        <!-- 页面标题 -->
        <div style="margin-bottom: 30px">
          <h1 style="color: #2c3e50; margin-bottom: 10px">系统设置</h1>
          <p style="color: #666">系统配置和参数管理</p>
        </div>

        <!-- 设置内容 -->
        <div class="card">
          <div class="card-content" style="padding: 0">
            <div
              style="
                display: grid;
                grid-template-columns: 200px 1fr;
                min-height: 500px;
              "
            >
              <!-- 设置菜单 -->
              <div
                style="
                  background: #f8f9fa;
                  padding: 20px;
                  border-right: 1px solid #e9ecef;
                "
              >
                <div style="display: flex; flex-direction: column; gap: 5px">
                  <button
                    id="tab-general"
                    class="settings-tab active"
                    onclick="showSettingsTab('general')"
                  >
                    基本设置
                  </button>
                  <button
                    id="tab-project"
                    class="settings-tab"
                    onclick="showSettingsTab('project')"
                  >
                    项目设置
                  </button>
                  <button
                    id="tab-user"
                    class="settings-tab"
                    onclick="showSettingsTab('user')"
                  >
                    用户设置
                  </button>
                  <button
                    id="tab-notification"
                    class="settings-tab"
                    onclick="showSettingsTab('notification')"
                  >
                    通知设置
                  </button>
                  <button
                    id="tab-security"
                    class="settings-tab"
                    onclick="showSettingsTab('security')"
                  >
                    安全设置
                  </button>
                  <button
                    id="tab-backup"
                    class="settings-tab"
                    onclick="showSettingsTab('backup')"
                  >
                    备份设置
                  </button>
                </div>
              </div>

              <!-- 设置内容 -->
              <div style="padding: 30px">
                <!-- 基本设置 -->
                <div id="settings-general" class="settings-content">
                  <h3 style="color: #2c3e50; margin-bottom: 25px">基本设置</h3>

                  <div style="display: flex; flex-direction: column; gap: 25px">
                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >系统名称</label
                      >
                      <input
                        type="text"
                        value="IPD项目协作系统"
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      />
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        系统显示的名称
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >系统描述</label
                      >
                      <textarea
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          height: 80px;
                          font-size: 1em;
                          resize: vertical;
                        "
                      >
集成产品开发(IPD)项目协作管理系统，支持六阶段流程管理、团队协作、DCP评审和交付物管理。</textarea
                      >
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        系统功能描述
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >时区设置</label
                      >
                      <select
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      >
                        <option value="Asia/Shanghai" selected>
                          Asia/Shanghai (UTC+8)
                        </option>
                        <option value="Asia/Tokyo">Asia/Tokyo (UTC+9)</option>
                        <option value="America/New_York">
                          America/New_York (UTC-5)
                        </option>
                        <option value="Europe/London">
                          Europe/London (UTC+0)
                        </option>
                      </select>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        系统默认时区
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >语言设置</label
                      >
                      <select
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      >
                        <option value="zh-CN" selected>简体中文</option>
                        <option value="zh-TW">繁体中文</option>
                        <option value="en-US">English</option>
                      </select>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        系统界面语言
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 项目设置 -->
                <div
                  id="settings-project"
                  class="settings-content"
                  style="display: none"
                >
                  <h3 style="color: #2c3e50; margin-bottom: 25px">项目设置</h3>

                  <div style="display: flex; flex-direction: column; gap: 25px">
                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >默认项目状态</label
                      >
                      <select
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      >
                        <option value="planning" selected>规划中</option>
                        <option value="in_progress">进行中</option>
                        <option value="not_started">未开始</option>
                      </select>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        新建项目的默认状态
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >项目编号前缀</label
                      >
                      <input
                        type="text"
                        value="PROJ"
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      />
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        自动生成项目编号的前缀
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >阶段自动推进</label
                      >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="auto-stage" checked />
                        <label
                          for="auto-stage"
                          style="margin: 0; font-weight: normal"
                          >启用阶段自动推进</label
                        >
                      </div>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        当前阶段完成时自动推进到下一阶段
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >DCP评审必需</label
                      >
                      <div
                        style="display: flex; align-items: center; gap: 10px"
                      >
                        <input type="checkbox" id="dcp-required" checked />
                        <label
                          for="dcp-required"
                          style="margin: 0; font-weight: normal"
                          >每个阶段必须通过DCP评审</label
                        >
                      </div>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        强制要求每个阶段完成DCP评审
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 用户设置 -->
                <div
                  id="settings-user"
                  class="settings-content"
                  style="display: none"
                >
                  <h3 style="color: #2c3e50; margin-bottom: 25px">用户设置</h3>

                  <div style="display: flex; flex-direction: column; gap: 25px">
                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >默认用户角色</label
                      >
                      <select
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      >
                        <option value="team_member" selected>团队成员</option>
                        <option value="project_manager">项目经理</option>
                        <option value="reviewer">评审员</option>
                      </select>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        新用户的默认角色
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >密码复杂度要求</label
                      >
                      <div
                        style="display: flex; flex-direction: column; gap: 8px"
                      >
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="pwd-length" checked />
                          <label
                            for="pwd-length"
                            style="margin: 0; font-weight: normal"
                            >最少8位字符</label
                          >
                        </div>
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="pwd-upper" checked />
                          <label
                            for="pwd-upper"
                            style="margin: 0; font-weight: normal"
                            >包含大写字母</label
                          >
                        </div>
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="pwd-number" checked />
                          <label
                            for="pwd-number"
                            style="margin: 0; font-weight: normal"
                            >包含数字</label
                          >
                        </div>
                      </div>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        用户密码必须满足的条件
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >会话超时时间</label
                      >
                      <select
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      >
                        <option value="30">30分钟</option>
                        <option value="60" selected>1小时</option>
                        <option value="120">2小时</option>
                        <option value="480">8小时</option>
                      </select>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        用户无操作后自动退出的时间
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 通知设置 -->
                <div
                  id="settings-notification"
                  class="settings-content"
                  style="display: none"
                >
                  <h3 style="color: #2c3e50; margin-bottom: 25px">通知设置</h3>

                  <div style="display: flex; flex-direction: column; gap: 25px">
                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >邮件通知</label
                      >
                      <div
                        style="display: flex; flex-direction: column; gap: 8px"
                      >
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="email-project" checked />
                          <label
                            for="email-project"
                            style="margin: 0; font-weight: normal"
                            >项目状态变更</label
                          >
                        </div>
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="email-dcp" checked />
                          <label
                            for="email-dcp"
                            style="margin: 0; font-weight: normal"
                            >DCP评审通知</label
                          >
                        </div>
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="email-task" />
                          <label
                            for="email-task"
                            style="margin: 0; font-weight: normal"
                            >任务分配通知</label
                          >
                        </div>
                      </div>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        选择需要发送邮件通知的事件
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >SMTP服务器设置</label
                      >
                      <div
                        style="display: flex; flex-direction: column; gap: 12px"
                      >
                        <input
                          type="text"
                          placeholder="SMTP服务器地址"
                          style="
                            width: 100%;
                            padding: 12px;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                            font-size: 1em;
                          "
                        />
                        <div
                          style="
                            display: grid;
                            grid-template-columns: 1fr 1fr;
                            gap: 12px;
                          "
                        >
                          <input
                            type="number"
                            placeholder="端口号"
                            value="587"
                            style="
                              padding: 12px;
                              border: 1px solid #ddd;
                              border-radius: 4px;
                              font-size: 1em;
                            "
                          />
                          <select
                            style="
                              padding: 12px;
                              border: 1px solid #ddd;
                              border-radius: 4px;
                              font-size: 1em;
                            "
                          >
                            <option value="tls" selected>TLS加密</option>
                            <option value="ssl">SSL加密</option>
                            <option value="none">无加密</option>
                          </select>
                        </div>
                        <input
                          type="email"
                          placeholder="发送邮箱"
                          style="
                            width: 100%;
                            padding: 12px;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                            font-size: 1em;
                          "
                        />
                        <input
                          type="password"
                          placeholder="邮箱密码"
                          style="
                            width: 100%;
                            padding: 12px;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                            font-size: 1em;
                          "
                        />
                      </div>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        配置邮件发送服务器
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 安全设置 -->
                <div
                  id="settings-security"
                  class="settings-content"
                  style="display: none"
                >
                  <h3 style="color: #2c3e50; margin-bottom: 25px">安全设置</h3>

                  <div style="display: flex; flex-direction: column; gap: 25px">
                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >登录安全</label
                      >
                      <div
                        style="display: flex; flex-direction: column; gap: 8px"
                      >
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="login-captcha" checked />
                          <label
                            for="login-captcha"
                            style="margin: 0; font-weight: normal"
                            >启用登录验证码</label
                          >
                        </div>
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="login-limit" checked />
                          <label
                            for="login-limit"
                            style="margin: 0; font-weight: normal"
                            >限制登录失败次数</label
                          >
                        </div>
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="login-log" checked />
                          <label
                            for="login-log"
                            style="margin: 0; font-weight: normal"
                            >记录登录日志</label
                          >
                        </div>
                      </div>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        增强登录安全性的措施
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >数据加密</label
                      >
                      <div
                        style="display: flex; flex-direction: column; gap: 8px"
                      >
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="data-encrypt" checked />
                          <label
                            for="data-encrypt"
                            style="margin: 0; font-weight: normal"
                            >启用数据库加密</label
                          >
                        </div>
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="file-encrypt" />
                          <label
                            for="file-encrypt"
                            style="margin: 0; font-weight: normal"
                            >启用文件加密</label
                          >
                        </div>
                      </div>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        保护敏感数据的安全
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >访问控制</label
                      >
                      <div
                        style="display: flex; flex-direction: column; gap: 8px"
                      >
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="ip-whitelist" />
                          <label
                            for="ip-whitelist"
                            style="margin: 0; font-weight: normal"
                            >启用IP白名单</label
                          >
                        </div>
                        <div
                          style="display: flex; align-items: center; gap: 10px"
                        >
                          <input type="checkbox" id="role-permission" checked />
                          <label
                            for="role-permission"
                            style="margin: 0; font-weight: normal"
                            >启用角色权限控制</label
                          >
                        </div>
                      </div>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        控制系统访问权限
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 备份设置 -->
                <div
                  id="settings-backup"
                  class="settings-content"
                  style="display: none"
                >
                  <h3 style="color: #2c3e50; margin-bottom: 25px">备份设置</h3>

                  <div style="display: flex; flex-direction: column; gap: 25px">
                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >自动备份</label
                      >
                      <div
                        style="
                          display: flex;
                          align-items: center;
                          gap: 10px;
                          margin-bottom: 12px;
                        "
                      >
                        <input type="checkbox" id="auto-backup" checked />
                        <label
                          for="auto-backup"
                          style="margin: 0; font-weight: normal"
                          >启用自动备份</label
                        >
                      </div>
                      <select
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      >
                        <option value="daily" selected>每日备份</option>
                        <option value="weekly">每周备份</option>
                        <option value="monthly">每月备份</option>
                      </select>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        设置自动备份的频率
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >备份保留</label
                      >
                      <select
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      >
                        <option value="7">保留7天</option>
                        <option value="30" selected>保留30天</option>
                        <option value="90">保留90天</option>
                        <option value="365">保留1年</option>
                      </select>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        备份文件的保留时间
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >备份存储路径</label
                      >
                      <input
                        type="text"
                        value="/backup/ipd-system"
                        style="
                          width: 100%;
                          padding: 12px;
                          border: 1px solid #ddd;
                          border-radius: 4px;
                          font-size: 1em;
                        "
                      />
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        备份文件的存储位置
                      </div>
                    </div>

                    <div>
                      <label
                        style="
                          display: block;
                          margin-bottom: 8px;
                          color: #666;
                          font-weight: bold;
                        "
                        >手动备份</label
                      >
                      <div style="display: flex; gap: 10px">
                        <button
                          class="btn btn-primary"
                          onclick="showAlert('备份功能开发中')"
                        >
                          立即备份
                        </button>
                        <button
                          class="btn btn-secondary"
                          onclick="showAlert('恢复功能开发中')"
                        >
                          恢复备份
                        </button>
                      </div>
                      <div
                        style="color: #999; font-size: 0.8em; margin-top: 5px"
                      >
                        手动执行备份和恢复操作
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 保存按钮 -->
                <div
                  style="
                    margin-top: 40px;
                    padding-top: 20px;
                    border-top: 1px solid #e9ecef;
                  "
                >
                  <div style="display: flex; gap: 10px">
                    <button class="btn btn-primary" onclick="saveSettings()">
                      保存设置
                    </button>
                    <button class="btn btn-secondary" onclick="resetSettings()">
                      重置为默认
                    </button>
                    <button
                      class="btn btn-outline"
                      onclick="showAlert('导出功能开发中')"
                    >
                      导出配置
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- 引入脚本 -->
    <script src="js/data.js"></script>
    <script src="js/common.js"></script>
    <script>
      // 设置标签切换
      function showSettingsTab(tabName) {
        // 隐藏所有内容
        var contents = document.querySelectorAll(".settings-content");
        contents.forEach(function (content) {
          content.style.display = "none";
        });

        // 重置所有按钮样式
        var buttons = document.querySelectorAll(".settings-tab");
        buttons.forEach(function (btn) {
          btn.classList.remove("active");
        });

        // 显示目标内容
        var targetContent = document.getElementById("settings-" + tabName);
        if (targetContent) {
          targetContent.style.display = "block";
        }

        // 激活对应按钮
        var activeButton = document.getElementById("tab-" + tabName);
        if (activeButton) {
          activeButton.classList.add("active");
        }
      }

      // 保存设置
      function saveSettings() {
        showSuccessMessage("设置已保存成功！");
      }

      // 重置设置
      function resetSettings() {
        showConfirm("确定要重置所有设置为默认值吗？", function () {
          showSuccessMessage("设置已重置为默认值");
        });
      }

      // 页面初始化
      document.addEventListener("DOMContentLoaded", function () {
        // 添加设置标签样式
        var style = document.createElement("style");
        style.textContent = `
                .settings-tab {
                    width: 100%;
                    padding: 12px 15px;
                    text-align: left;
                    border: none;
                    background: transparent;
                    color: #666;
                    border-radius: 4px;
                    cursor: pointer;
                    transition: all 0.3s;
                    font-size: 0.9em;
                }
                .settings-tab:hover {
                    background: #e9ecef;
                    color: #2c3e50;
                }
                .settings-tab.active {
                    background: #3498db;
                    color: white;
                }
                .settings-content {
                    animation: fadeIn 0.3s ease-in-out;
                }
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
            `;
        document.head.appendChild(style);
      });
    </script>
  </body>
</html>
